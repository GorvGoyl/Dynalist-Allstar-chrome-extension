var jg=function(){function e(e,t,i){var n;return function(){var s=this,o=arguments,a=function(){n=null,i||e.apply(s,o)},c=i&&!n;clearTimeout(n),n=setTimeout(a,t),c&&e.apply(s,o)}}function t(e){var t=0;u()&&J(),t=$(I).width()/2,$(I).width(t);var i='<div class="iframewrapper" style="position:absolute;top:0;right:0;z-index:1;height:100%;width:'+t+'px;"><iframe onload="jg.loadEventiFrame(this)" class="sidedociframecls" src="'+e+'"  frameborder="0" height="100%" width='+t+'px style="" allowfullscreen></iframe></div>',n=JSON.parse(localStorage.dynalist);n["file-pane-expanded-state"]=!1,localStorage.setItem("dynalist",JSON.stringify(n)),B=JSON.parse(JSON.stringify(DYNALIST.app.userspace.ui.view.preferences.preferences)),DYNALIST.app.userspace.ui.view.preferences.preferences["ui.shortcut_help"]="hide",DYNALIST.app.userspace.ui.view.save_preferences(),$(I).after(i)}function i(){$(I).after(S),o();var e=$(X),t=$(P);e.on("mousedown",function(i){t.css("position","absolute"),e.css("border-left-style","solid"),z=!0,q=i.clientX}),$(document).on("mousemove",n),$(document).on("mouseup",s),$(window).on("resize",o)}function n(e){if(z){var t=$(X);t.css("left",e.clientX)}}function s(e){var t=e.clientX,i=$(P),n=$(X);if(i.css("position","static"),n.css("border-left-style","none"),z&&t!=q){var s,a,c=Math.abs(t-q),l=$(I),r=$(O);t<q?(s=l.width()-c,a=r.width()+c,s<U&&(s=U,a=r.width()+l.width()-U)):(s=l.width()+c,a=r.width()-c,a<U&&(a=U,s=l.width()+r.width()-U)),l.css("width",s),r.css("width",a),$(D).css("width",a),o()}z=!1}function o(){if($(X).length>0){var e=$(I),t=e.width()+Number(e.css("left").replace("px",""));$(X).css("left",t)}}function a(){try{var e=localStorage.getItem(_);e=JSON.parse(e),null!=e.side_doc&&e.side_doc===!1?r():(d(),e[H]&&t(e[H]))}catch(e){console.log(JSON.stringify(e))}}function c(e){try{var t=localStorage.getItem(_);return t=JSON.parse(t),t[e]}catch(e){}}function l(e,t){var i=localStorage.getItem(_);i=JSON.parse(i),i[e]=t,localStorage.setItem(_,JSON.stringify(i))}function r(){u()&&J(),$(x).remove()}function d(){0===$(x).length&&($(f+h).after(v),$(".open-in-side-li").hover(function(){$(this).find("img").css("filter","brightness(150%)")},function(){$(this).find("img").css("filter","")}))}function u(){return!!($(O)&&$(O).width()>0)}function p(){return!(0===$(M).width())}function A(e){var t=0,i=0;u()&&(t=$(".main-container").width(),i=t-$(".LeftPaneSlidebarContainer").width()-$(".LeftPaneSplitter").width()-4,p()&&(i-=$(R).width()),i-=$(O).width(),$(I).width(i),o())}var m={},f=".ContextMenu.DocumentItemContextMenu",h=" >:nth-child(1)",v='<ul class="MenuGroup menuitem-sidedoc"><li onclick="jg.open_in_side(this)" class="open-in-side-li MenuItem"><div style="display: inline-flex;"><img style="width: 100%;margin-left: 2px;margin-right: 12px;" class="MenuItem-icon side-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAbQAAAG0BjlwfygAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABcSURBVDiN7c8hDoBADETRX4JEciouRVB7hrkId9oEuZYMBkkxaxDUVLz0Jw1JpmOGnmOAEWi21yeMiAXA9p74hqSa1SUVSeXFa/cLf+APfCMQkk7gSHy6d0t8vgB1bhqxJYukhwAAAABJRU5ErkJggg=="></div><span class="MenuItem-name">Open in side</span></li></ul>',g='<li class="MenuItem menuitem-allstar-settings-li" onclick="jg.open_allstar_settings_popup(this)"><div class="MenuItem-icon"><img style="width:14px;margin:0;" class="MenuItem-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQRSURBVEiJpZZfiFR1FMc/57d3Z4TWmqEytY0gBKPyz0NSiyL5IFK4iRTz0Aq17u69Mw5tT5X1UBtF9GAQK8Pde3dtStqXMQ0yRUWKysCQjFBDFsE/ZRZrO9ZqNLN37unh3rFRx42l78v9/c75ne85v/P7/c65QoxisTirWq3awDPAQ8AtzAxXgOOqOlqtVv3+/v4KgAAMDw+312q1gyKyEPge+EZErsyEXVXbgOXAUuBEGIZrcrnceRkcHEwmk8kjcdRbHMd5aYaRXwPf9zcCI2EYjlWr1SVWMpl0gEWxvuP/kAOo6jxARGRhMpnsMyLSBRyP9Ss8z1s0jf20GBgYsIBsPP1JVbuMqj4AfAn8GEeQvRnBf2H+/PnrgHYgAD4XkQcN0AZMAh8CiMiGQqHQFjuTmTgIw3BTPNwPXABmi+d5CrxjjHkvDMNzQAI4AtwDzAHGRGRrKpXyMplMrU42NDS02hjzqqo+CvwNnAUWRzHKOlXtADabukFfX99vwMfxdBkwFzDA/apamJiY2FEsFmcBeJ73uogcUNXHgFlAClhCdO3PpFKpPXXeqw5izIu/ZeBlVX0ScIGaiKyvVCo7PM97CxiI1+0TkU5V3QiMxbJ0uVxuqxNa9cHIyMi9tVptFYCq9maz2V2xavfQ0NBhEflARNYCa2O5a9t2XkQUwHXdA8aYU8BtqrpaRK7dwdTUVHt93NraerhxW9lsdjuwu0F0EXihTg6Qy+XOA6cARGTuDSlKJBKnAY2dLWt04Pt+V0PkAHcAW0qlUktd4LruHOC+2MGFuvzqLXIc5xXf9/eo6hPA76r6tjHmhKp2Ej2eFuAgcIh/z+ALEdkKtKnqi0QV4SKwANhM4y0CMMZsAs4Dt4vIu6q6D8gDLaq6PwiC9Y7jvAG8GZusUtVdqro9Jq+o6rOO4/xxQ4oAent7zwZB8DDwPjABhMBJ4HkR6czn85cBHMd5TUSeBo4CU8CkiOwNw3BlNpvd28hpcR3y+fyvQA/QUyqVWiYnJ+8KgmDccZypxnW2be90Xfe7XC535nqOa7IynXJ8fPzOIAhOAic9z3ukLi8UCnM9z/vUGHPa9/3Hp+OwiOrQ7GbKWq32l2VZZ4jy+5XneXngGPAJ0aO8pKo/N7NV1VtFZNIQVdHlzRb19/f/mUgkVhJV2wQwDHwdk58TkRWO4xxrZisiK4DjRlVHgaW+7z/VbGF3d/elSqWyRkS2xaJW4FvLsjps2z7RzMb3/QxR4Rutt8zDwAIRec627Z3NjCCqoEC7iHx0/aE3kqvqNmAsnU53CIDruncbYz4jatg/AIdE5PLNHDVDGIaz47QsBo5altXZ09Pzy9WGUiqVEuVyuf7bsoioEc0El4kuwGg6nR7OZDJVgH8Ai86YTjG085cAAAAASUVORK5CYII="></div><span class="MenuItem-name">Allstar Settings</span></li>',w='<div style ="display:none;" class="modal-container allstar-settings is-shown"> <div class="modal-bg"></div>  <div class="modal js-stop-mousedown-propagation loadable-form">  <span onclick="(function(){$(&quot;.modal-container.allstar-settings&quot;).hide()})()" class="close-btn modal-close-btn"></span>  <div class="mobile-header mod-settings"><div class="MobileHeader-backIcon"></div><div class="MobileHeader-title">Allstar Settings</div>  </div>  <h1 class="modal-title">Allstar Settings</h1>  <div class="settings-tabs-container"><div class="settings-tab is-selected" data-name="preferences"> <div class="setting-section">  <div class="setting mod-checkbox"><input class="js-update-setting sidedoc-checkbox setting-checkbox" onclick ="jg.save_allstar_settings_popup(this)" type="checkbox" data-key="ui.current_highlight" id="ui.current_highlight"><label  class="setting-label mod-checkbox" for="ui.current_highlight">Open Doc in Side</label><div class="setting-explanation">Context menu option to open 2nd document side by side. Work on two documents at same time.</div>  </div> </div></div>  </div> </div></div>',S='<div id="dragoverlay" style="position: static;cursor: ew-resize;top: 0px;bottom: 0px;z-index: 99;left: 0;width: 100%;"><div id="draghandle" style="position: absolute !important;left: 0px;top: 0px;bottom: 0px;width: 9px;cursor: ew-resize;border-left: 1px none #e2e2e2;z-index: 100;"></div></div>',b=".DocumentItem-header",y="selected_2",x=".menuitem-sidedoc",I=".DocumentContainer",k=".ShortcutHelp-closeButton",N=".MenuItem--shortcutHelp",D=".sidedociframecls",M=".ShortcutHelp-tableContainer",C=".LeftPaneContainer",B="",R=".ShortcutHelp",O=".iframewrapper",_="dynalist_allstar",V='{"side_doc":true}',H="side_doc_url",z=!1,q=0,X="#draghandle",P="#dragoverlay",U=200,E=setInterval(function(){if($(b).length>0){d(),$(".ContextMenu.main-menu .MenuItem.MenuItem--settings").after(g),$(".modal-container.settings").before(w),$(".menuitem-allstar-settings-li").hover(function(){$(this).find("img").css("filter","brightness(150%)")},function(){$(this).find("img").css("filter","")}),$(b).on("contextmenu",function(){$(b).removeClass(y),$(this).addClass(y)}),$(k).on("click",function(e){A()}),$(N).on("click",function(e){A()}),new MutationObserver(function(e){t()}).observe(document.querySelector(C),{attributes:!0});var t=e(function(){A()},500);clearInterval(E);var i=localStorage.getItem(_);i||localStorage.setItem(_,V),a()}},1e3),j=function(e){DYNALIST.app.userspace.view.dom_events.ui.hide_context_menu();var t=$(".modal-container.allstar-settings"),i=c("side_doc");null!=i&&i===!1?t.find(".sidedoc-checkbox").prop("checked",!1):t.find(".sidedoc-checkbox").prop("checked",!0),t.show()};m.open_allstar_settings_popup=j;var L=function(e){var t="side_doc";e.checked===!0?d():r(),l(t,e.checked)};m.save_allstar_settings_popup=L;var Y=function(e){$(f).hide();var i=$(b+"."+y).text(),n=DYNALIST.app.document_manager.userspace.server_files,s=DYNALIST.SERVER_URL+"/d/",o=!1;for(var a in n){var c=n[a];if(c.title===i){s+=c.server_id,o=!0;break}}o&&t(s)};m.open_in_side=Y;var J=function(){$(O).remove(),DYNALIST.app.userspace.ui.pane_ui._update_nav_width(),l(H,null),$(P).remove(),$(document).off("mousemove",n),$(document).off("mouseup",s)};m.closeSideDoc=J;var T=function(e){localStorage.dynalist;$(e).contents().find(".AppHeader,.GlobalSearchPage,.LeftPaneSlidebarContainer,.LeftPaneSplitter,.ShortcutHelp,.DocumentTools").remove(),$(e).contents().find(".Document").prepend('<div class="DocumentTools sidedoc"> <div class="close-btn DocumentTools-icon iframe-close js-stop-mousedown-propagation" style=""><div class="tooltip mod-close" data-title="Close"></div></div> </div>'),$(e).contents().find(".DocumentTools.sidedoc").show(),$(e).contents().find(".iframe-close").on("click",jg.closeSideDoc),$(e).contents().find(".normal-view").removeClass("normal-view");var t=$(e).contents().find("body");t.removeClass("is-mobile"),t.hasClass("is-desktop")||t.addClass("is-desktop"),i();var n=$(e).contents().find(I)[0];new MutationObserver(function(t){Q(e)}).observe(n,{attributes:!0})};m.loadEventiFrame=T;var Q=e(function(e){var t=$(e).contents().get(0).location.href,i=JSON.parse(localStorage.dynalist);i["file-pane-expanded-state"]=!0,localStorage.setItem("dynalist",JSON.stringify(i)),DYNALIST.app.userspace.ui.view.preferences.preferences=B,DYNALIST.app.userspace.ui.view.save_preferences(),l(H,t)},500);return m}();