var jg=function(){function e(){try{var e=localStorage.getItem(L);e=JSON.parse(e),null!=e.side_doc&&e.side_doc===!1?n():s()}catch(e){console.log(JSON.stringify(e))}}function t(e){try{var t=localStorage.getItem(L);return t=JSON.parse(t),t[e]}catch(e){}}function i(e,t){var i=localStorage.getItem(L);i=JSON.parse(i),i[e]=t,localStorage.setItem(L,JSON.stringify(i))}function n(){o()&&O(),$(h).remove()}function s(){0===$(h).length&&($(d+u).after(p),$(".open-in-side-li").hover(function(){$(this).find("img").css("filter","brightness(140%)")},function(){$(this).find("img").css("filter","")}))}function a(e,t,i){var n;return function(){var s=this,a=arguments,o=function(){n=null,i||e.apply(s,a)},c=i&&!n;clearTimeout(n),n=setTimeout(o,t),c&&e.apply(s,a)}}function o(){return!!($(x)&&$(x).width()>0)}function c(){return!(0===$(k).width())}function l(e){var t=0,i=0;o()&&(t=$(".main-container").width(),i=t-$(".LeftPaneSlidebarContainer").width()-$(".LeftPaneSplitter").width()-4,c()&&(i-=$(_).width()),i-=$(x).width(),$(v).width(i))}var r={},d=".ContextMenu.DocumentItemContextMenu",u=" >:nth-child(1)",p='<ul class="MenuGroup menuitem-sidedoc"><li onclick="jg.open_side_doc(this)" class="open-in-side-li MenuItem"><div style="display: inline-flex;"><img style="width: 100%;margin-left: 2px;margin-right: 12px;" class="MenuItem-icon side-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAbQAAAG0BjlwfygAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABcSURBVDiN7c8hDoBADETRX4JEciouRVB7hrkId9oEuZYMBkkxaxDUVLz0Jw1JpmOGnmOAEWi21yeMiAXA9p74hqSa1SUVSeXFa/cLf+APfCMQkk7gSHy6d0t8vgB1bhqxJYukhwAAAABJRU5ErkJggg=="></div><span class="MenuItem-name">Open in side</span></li></ul>',A='<li class="MenuItem menuitem-allstar-settings-li" onclick="jg.open_allstar_settings_popup(this)"><div class="MenuItem-icon"><img style="width:14px;margin:0;" class="MenuItem-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAARQAAAEUBOP42OwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHgSURBVCiRhdJPiE5xFMbx7/O7N81myqQxa2qahSxYGf8WShMhUorF2Li/+1I2k5XMCDspu7d7784kSYgiKUnNwp9SKLOQbJDJ4t28mXdk7vtYmJkoxlmecz5ncc4RQFVV+2yPA6uBef4eKfBV0rkY4z0toCu2tzQajel/IACKohiU9DyEcCzYnrA9F0LYtBwCCCH0Ayvruj4TgAFJd20f/x/sdrsngKeS+lWW5UfgMDAFvAH6gTvAqb6+vu+tVmtC0lFgDlgrKdq+kALMz8+/T9O0K+mT7avASWBdq9WakbQbuGR7UNIQ8G5xU6Rpug1QT0/PodHR0W9lWd4GpiWtkLQzxvgIoCzLrbaHl2AI4UO329Xs7OyuycnJB51O5zRQA19tj5Vl+UrSGtsDkj7bJgBkWfYSuCzpRqfTaQMHJR2QtAMYWhjwQtKU7VvALwiQ5/mY7Q22D9V1vTHG+DDG+La3t3dzXdf7QwjbsywbyfP8xx8QoNFovA4hpEmSPKuq6kBRFMPtdvt5kiTrsyybkuSlmwIzRVEMLiZijNeBpu2bkp4Aj4GLi/VmszkEfFFRFHslnZV0JMb4brGhqqoR26vyPL/2O0qS5JrtcS007bE9AQywzJNLmrF9Ps/z+z8BTHLaxEbRmdMAAAAASUVORK5CYII="></div><span class="MenuItem-name">Allstar Settings</span></li>',m='<div style ="display:none;" class="modal-container allstar-settings is-shown"> <div class="modal-bg"></div>  <div class="modal js-stop-mousedown-propagation loadable-form">  <span onclick="(function(){$(&quot;.modal-container.allstar-settings&quot;).hide()})()" class="close-btn modal-close-btn"></span>  <div class="mobile-header mod-settings"><div class="MobileHeader-backIcon"></div><div class="MobileHeader-title">Allstar Settings</div>  </div>  <h1 class="modal-title">Allstar Settings</h1>  <div class="settings-tabs-container"><div class="settings-tab is-selected" data-name="preferences"> <div class="setting-section">  <div class="setting mod-checkbox"><input class="js-update-setting sidedoc-checkbox setting-checkbox" onclick ="jg.save_allstar_settings_popup(this)" type="checkbox" data-key="ui.current_highlight" id="ui.current_highlight"><label  class="setting-label mod-checkbox" for="ui.current_highlight">Open Doc in Side</label><div class="setting-explanation">Context menu option to open 2nd document side by side. Work on two documents at same time.</div>  </div> </div></div>  </div> </div></div>',f=".DocumentItem-header",g="selected_2",h=".menuitem-sidedoc",v=".DocumentContainer",S=".ShortcutHelp-closeButton",b=".MenuItem--shortcutHelp",w="",k=".ShortcutHelp-tableContainer",y=".LeftPaneContainer",I="",_=".ShortcutHelp",x=".iframewrapper",L="dynalist_allstar",C='{"side_doc":true}',N=setInterval(function(){if($(".LeftPaneContainer")&&$(".LeftPaneContainer").width()>0){s(),$(".ContextMenu.main-menu .MenuItem.MenuItem--settings").after(A),$(".modal-container.settings").before(m),$(".menuitem-allstar-settings-li").hover(function(){$(this).find("img").css("filter","brightness(140%)")},function(){$(this).find("img").css("filter","")}),$(f).on("contextmenu",function(){$(f).removeClass(g),$(this).addClass(g)}),$(S).on("click",function(e){l()}),$(b).on("click",function(e){l()}),new MutationObserver(function(e){t()}).observe(document.querySelector(y),{attributes:!0});var t=a(function(){l()},500);clearInterval(N);var i=localStorage.getItem(L);i||localStorage.setItem(L,C),e()}},3e3),M=function(e){DYNALIST.app.userspace.view.dom_events.ui.hide_context_menu();var i=$(".modal-container.allstar-settings"),n=t("side_doc");null!=n&&n===!1?i.find(".sidedoc-checkbox").prop("checked",!1):i.find(".sidedoc-checkbox").prop("checked",!0),i.show()};r.open_allstar_settings_popup=M;var B=function(e){var t="side_doc";e.checked===!0?s():n(),i(t,e.checked)};r.save_allstar_settings_popup=B;var D=function(e){$(d).hide();var t=$(f+"."+g).text(),i=DYNALIST.app.document_manager.userspace.server_files;w=DYNALIST.SERVER_URL+"/d/";for(var n in i){var s=i[n];if(s.title===t){w+=s.server_id;break}}var a=0;o()&&O(),a=$(v).width()/2,$(v).width(a);var c='<div class="iframewrapper" style="position:absolute;top:0;right:0;z-index:1;height:100%;width:'+a+'px;"><iframe onload="jg.loadEventiFrame(this)" class="sidedociframecls" src="'+w+'"  frameborder="0" height="100%" width='+a+'px style="" allowfullscreen></iframe></div>',l=JSON.parse(localStorage.dynalist);l["file-pane-expanded-state"]=!1,localStorage.setItem("dynalist",JSON.stringify(l)),I=JSON.parse(JSON.stringify(DYNALIST.app.userspace.ui.view.preferences.preferences)),DYNALIST.app.userspace.ui.view.preferences.preferences["ui.shortcut_help"]="hide",DYNALIST.app.userspace.ui.view.save_preferences(),$(v).after(c)};r.open_side_doc=D;var O=function(){$(x).remove(),DYNALIST.app.userspace.ui.pane_ui._update_nav_width()};r.close_side_doc=O;var J=function(e){localStorage.dynalist;$(e).contents().find(".AppHeader,.GlobalSearchPage,.LeftPaneSlidebarContainer,.LeftPaneSplitter,.ShortcutHelp,.DocumentTools").remove(),$(e).contents().find(".Document").prepend('<div class="DocumentTools sidedoc"> <div class="close-btn DocumentTools-icon iframe-close js-stop-mousedown-propagation" style=""></div> </div>'),$(e).contents().find(".DocumentTools.sidedoc").show(),$(e).contents().find(".iframe-close").on("click",jg.close_side_doc),$(e).contents().find(".normal-view").removeClass("normal-view");var t=$(e).contents().find(v)[0];new MutationObserver(function(t){R(e)}).observe(t,{attributes:!0})};r.loadEventiFrame=J;var R=a(function(e){var t=JSON.parse(localStorage.dynalist);t["file-pane-expanded-state"]=!0,localStorage.setItem("dynalist",JSON.stringify(t)),DYNALIST.app.userspace.ui.view.preferences.preferences=I,DYNALIST.app.userspace.ui.view.save_preferences()},500);return r}();